(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3932:function(e,t,n){Promise.resolve().then(n.bind(n,5323))},5323:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n(7437),r=n(2265);async function s(){try{let e=await fetch("/bff/user",{credentials:"include",headers:{"X-CSRF":"1"}});if(e.ok){let t=await e.json();if(Array.isArray(t)&&t.length>0)return{isAuthenticated:!0,user:t,isLoading:!1}}return{isAuthenticated:!1,user:null,isLoading:!1}}catch(e){return console.error("Authentication check failed:",e),{isAuthenticated:!1,user:null,isLoading:!1}}}function a(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],[t,n]=(0,r.useState)({isAuthenticated:!1,user:null,isLoading:!0}),[i,a]=(0,r.useState)(!1),[l,o]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{let t="";try{let e=await fetch("/app.config.json");t=(await e.json()).pmsLoginUrl,o(t)}catch(e){console.error("Failed to load app.config.json",e)}let i=await s();n(i),e&&!i.isAuthenticated&&!i.isLoading&&t&&a(!0)})()},[e]),{...t,showLoginMessage:i,pmsLoginUrl:l}}function l(e){let{children:t,loadingComponent:n}=e,{isAuthenticated:r,isLoading:s,showLoginMessage:l,pmsLoginUrl:o}=a(!0);return s?(0,i.jsx)(i.Fragment,{children:n||(0,i.jsxs)("div",{style:{padding:"2rem",fontFamily:"system-ui, sans-serif",textAlign:"center",marginTop:"4rem"},children:[(0,i.jsx)("div",{style:{display:"inline-block",width:"50px",height:"50px",border:"5px solid #f3f3f3",borderTop:"5px solid #0070f3",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,i.jsx)("p",{style:{marginTop:"1rem",color:"#666"},children:"Loading..."}),(0,i.jsx)("style",{children:"\n              @keyframes spin {\n                0% { transform: rotate(0deg); }\n                100% { transform: rotate(360deg); }\n              }\n            "})]})}):r?(0,i.jsx)(i.Fragment,{children:t}):l?(alert("User is not authenticated. Redirecting to login."+o),(0,i.jsxs)("div",{style:{padding:"2rem",fontFamily:"system-ui",textAlign:"center"},children:[(0,i.jsx)("h1",{children:"Authentication Required"}),(0,i.jsxs)("p",{children:["User is not authenticated. Please login from the Platform Management System application:",(0,i.jsx)("a",{href:o,style:{marginLeft:"0.5rem"},children:"Login to PMS"})]})]})):null}var o=e=>{let{products:t}=e;return t&&0!==t.length?(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1.5rem",marginTop:"2rem"},children:t.map(e=>(0,i.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("h3",{style:{fontSize:"1.25rem",marginBottom:"0.5rem"},children:e.name}),(0,i.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,i.jsx)("strong",{children:"Price:"})," $",e.price.toFixed(2)]}),(0,i.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,i.jsx)("strong",{children:"Category:"})," ",e.categoryName]}),(0,i.jsxs)("p",{style:{margin:"0.25rem 0"},children:[(0,i.jsx)("strong",{children:"Stock:"})," ",e.stockQuantity]})]},e.id))}):(0,i.jsx)("p",{children:"No items found."})};function d(){let{user:e}=a(!1),[t,n]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),u=async()=>{c(null),l(!0);try{let e=await fetch("/bff/products",{credentials:"include",headers:{"X-CSRF":"1"}});if(!e.ok){c("Failed to load products");return}let t=await e.json();n(t)}catch(e){console.error(e),c("Failed to load products")}finally{l(!1)}};return((0,r.useEffect)(()=>{e&&u()},[e]),e)?(0,i.jsxs)("div",{style:{padding:"2rem",fontFamily:"system-ui"},children:[(0,i.jsx)("h1",{children:"View All Products"}),s&&(0,i.jsx)("p",{children:"Loading products..."}),d&&(0,i.jsx)("div",{style:{marginTop:"1rem",color:"red"},children:d}),t&&(0,i.jsx)(o,{products:t.products})]}):null}function c(){return(0,i.jsx)(l,{children:(0,i.jsx)(d,{})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3932)}),_N_E=e.O()}]);